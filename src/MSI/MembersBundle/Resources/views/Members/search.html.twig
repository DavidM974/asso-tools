{% extends "MSICoreBundle::layout.html.twig" %}

{% block add_css %}
    <link href="{{ asset('public/global/plugins/nouislider/nouislider.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('public/global/plugins/nouislider/nouislider.pips.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('public/global/css/plugins-md.min.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('public/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('public/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css') }}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-md-12">
            <div class="portlet light">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-search-plus font-green"></i>
                        <span class="caption-subject font-green sbold uppercase">{{ 'msi.members.members.search'|trans({}, 'Members') }}</span>
                    </div>
                </div>
                {{ form_start(form, { 'action': path('msi_members_search'), 'attr': { 'role': 'form', 'id' : 'form-member-search' } }, form_enctype(form)) }}
                <div class="portlet box green">
                    <div class="portlet-title">
                        <div class="caption">
                            {{ 'msi.members.members.search.broad'|trans({}, 'Members') }}
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse" data-original-title="" title="{{ 'msi.members.members.search.updown'|trans({}, 'Members') }}"> </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="tab-content">
                                    <div class="col-md-6">
                                        <div class="form-body">
                                            <div class="form-group">
                                                {{ form_label(form.lastname, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.lastname, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.lastname) }}
                                                    </span>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.firstname, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.firstname, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.firstname) }}
                                                    </span>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.email, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-envelope"></i>
                                                        </span>
                                                        {{ form_widget(form.email, {'attr': {'class': 'form-control '}}) }}
                                                    </div>
                                                    <span class="help-block">
                                                        {{ form_errors(form.email) }}
                                                    </span>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.zipcode, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.zipcode, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.zipcode) }}
                                                    </span>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.city, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.city, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.city) }}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-body">
                                            <div class="form-group">
                                                {{ form_label(form.address, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.address, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.address) }}
                                                    </span>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.phone, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-phone"></i>
                                                        </span>
                                                        {{ form_widget(form.phone, {'attr': {'class': 'form-control '}}) }}
                                                        <span class="help-block">
                                                            {{ form_errors(form.phone) }}
                                                        </span>
                                                    </div>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.mobile, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <i class="fa fa-mobile"></i>
                                                        </span>
                                                        {{ form_widget(form.mobile, {'attr': {'class': 'form-control '}}) }}
                                                        <span class="help-block">
                                                            {{ form_errors(form.mobile) }}
                                                        </span>
                                                    </div>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.familySituation, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.familySituation, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.familySituation) }}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="portlet box green">
                    <div class="portlet-title">
                        <div class="caption">
                            {{ 'msi.members.members.search.plus'|trans({}, 'Members') }}
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse" data-original-title="" title="{{ 'msi.members.members.search.updown'|trans({}, 'Members') }}"> </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="tab-content">
                                    <div class="col-md-6">
                                        <div class="form-body">
                                            <div class="form-group">
                                                <label class="col-md-3 control-label">{{ 'msi.members.tranche'|trans({}, 'Members') }}</label>
                                                <div class="col-md-9">
                                                    <div class="form-group">
                                                        <div id="demo8" class="noUi-success"></div>
                                                        {{ form_widget(form.age_start)}}
                                                        {{ form_widget(form.age_end)}}
                                                    </div>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 control-label">{{ form_label(form.activeMember) }}</label>
                                                <div class="col-md-9">
                                                    <div class="radio-list">
                                                        <div class="md-radio-inline">
                                                            {% for radio_button in form.activeMember %}
                                                                <div class="md-radio">
                                                                    {{ form_widget(radio_button, {'attr':{'class':'md-radiobtn' }}) }}
                                                                    <label for="{{ radio_button.vars.id }}">
                                                                        <span></span>
                                                                        <span class="check"></span>
                                                                        <span class="box"></span> 
                                                                        {{ radio_button.vars.label|trans({}, 'Members') }}
                                                                    </label>
                                                                </div>
                                                            {% endfor %}
                                                        </div>
                                                        <span class="help-block">
                                                            {{ form_errors(form.activeMember) }}
                                                        </span>
                                                    </div>
                                                </div>
                                                <span class="help-block"> {{ 'msi.members.tranche.help'|trans({}, 'Members') }} </span>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.baptised, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    <div class="radio-list">
                                                        <div class="md-radio-inline">
                                                            {% for radio_button in form.baptised %}
                                                                <div class="md-radio">
                                                                    {{ form_widget(radio_button, {'attr':{'class':'md-radiobtn' }}) }}
                                                                    <label for="{{ radio_button.vars.id }}">
                                                                        <span></span>
                                                                        <span class="check"></span>
                                                                        <span class="box"></span> 
                                                                        {{ radio_button.vars.label|trans({}, 'Members') }}
                                                                    </label>
                                                                </div>
                                                            {% endfor %}
                                                        </div>
                                                        <span class="help-block">
                                                            {{ form_errors(form.baptised) }}
                                                        </span>
                                                    </div>
                                                    <br/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-3 control-label">{{ 'msi.members.date'|trans({}, 'Members') }}</label>
                                                <div class="col-md-9">
                                                    <div class="input-group input-large date-picker input-daterange" data-date-format="yyyy-mm-dd">
                                                        {{ form_widget(form.date_debut, {'attr': {'class': 'form-control '}}) }}
                                                        <span class="input-group-addon"> {{ 'msi.members.date.to'|trans({}, 'Members') }} </span>
                                                        {{ form_widget(form.date_fin, {'attr': {'class': 'form-control '}}) }}
                                                    </div>
                                                    <br/>
                                                </div>
                                                <span class="help-block"> {{ 'msi.members.date.help'|trans({}, 'Members') }} </span>
                                            </div>
                                            <div class="form-group">
                                                {{ form_label(form.sex, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    <div class="radio-list">
                                                        <div class="md-radio-inline">
                                                            {% for radio_button in form.sex %}
                                                                <div class="md-radio">
                                                                    {{ form_widget(radio_button, {'attr':{'class':'md-radiobtn' }}) }}
                                                                    <label for="{{ radio_button.vars.id }}">
                                                                        <span></span>
                                                                        <span class="check"></span>
                                                                        <span class="box"></span> 
                                                                        {% if  radio_button.vars.label == 'msi.members.all' %}
                                                                            {{ radio_button.vars.label |trans({}, 'Members') }}
                                                                        {% else %}
                                                                            {{ radio_button.vars.label | raw  }}
                                                                        {% endif%}
                                                                    </label>
                                                                </div>
                                                            {% endfor %}
                                                        </div>
                                                        <span class="help-block">
                                                            {{ form_errors(form.sex) }}
                                                        </span>
                                                    </div>
                                                    <br/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-body">
                                            <div class="form-group">
                                                {{ form_label(form.services, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                                <div class="col-md-9">
                                                    {{ form_widget(form.services, {'attr': {'class': 'form-control '}}) }}
                                                    <span class="help-block">
                                                        {{ form_errors(form.services) }}
                                                    </span>
                                                    <br/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            {{ form_label(form.professional_social_category, null , {'label_attr': {'class': 'control-label col-md-3 '}}) }}
                                            <div class="col-md-9">
                                                {{ form_widget(form.professional_social_category, {'attr': {'class': 'form-control '}}) }}
                                                <span class="help-block">
                                                    {{ form_errors(form.professional_social_category) }}
                                                </span>
                                                <br/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-body">
                    <div class="form-group">
                        <div class="col-md-2" style="height: 60px;text-align: center;line-height: 3;">
                            Type de résultats
                        </div>
                        <div class="col-md-8 btn-group" data-toggle="buttons">
                            {% for button in form.result_type%}
                                <label class="btn blue {% if button.vars.checked == true %} active {%endif%}" style="font-size: 30px;">
                                    {{ form_widget(button, {'attr': {'class': 'toggle'}} ) }} {{ button.vars.label | raw }}
                                </label>    
                                <div class="col-lg-1 mt-step-col"></div>                            
                            {% endfor %}
                        </div>
                        <div class="col-md-2" style="height: 60px;text-align: center;line-height: 4;">
                            <a href="" style="float: initial;">
                                {{ form_widget(form.search, {'attr': {'class': 'btn green', 'aria-pressed' : 'true'}} ) }}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{ form_end(form) }}
    </div>
</div>
</div>
{% endblock %}

{% block add_js %}
    <script src="{{ asset('public/global/plugins/nouislider/wNumb.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('public/global/plugins/nouislider/nouislider.js') }}" type="text/javascript"></script>
    <!--<script src="{{ asset('public/pages/scripts/components-nouisliders.js') }}" type="text/javascript"></script>-->
    <script src="{{ asset('public/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('public/pages/scripts/components-date-time-pickers.min.js') }}" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var demo8 = function () {
                var tooltipSlider = document.getElementById('demo8');

                noUiSlider.create(tooltipSlider, {
                    start: [0, 100],
                    connect: true,
                    range: {
                        'min': [0, 1],
                        'max': 100
                    }
                });

                var tipHandles = tooltipSlider.getElementsByClassName('noUi-handle'),
                        tooltips = [];

                // Add divs to the slider handles.
                for (var i = 0; i < tipHandles.length; i++) {
                    tooltips[i] = document.createElement('div');
                    tipHandles[i].appendChild(tooltips[i]);
                }

                // Add a class for styling
                tooltips[1].className += 'noUi-tooltip';
                // Add additional markup
                tooltips[1].innerHTML = '<strong></strong><span></span>';
                // Replace the tooltip reference with the span we just added
                tooltips[1] = tooltips[1].getElementsByTagName('span')[0];

                // Add a class for styling
                tooltips[0].className += 'noUi-tooltip';
                // Add additional markup
                tooltips[0].innerHTML = '<strong></strong><span></span>';
                // Replace the tooltip reference with the span we just added
                tooltips[0] = tooltips[0].getElementsByTagName('span')[0];

                // When the slider changes, write the value to the tooltips.
                tooltipSlider.noUiSlider.on('update', function (values, handle) {
                    tooltips[handle].innerHTML = Math.floor(values[handle]);
                    if (handle == 0)
                        $('#msi_member_search_age_start').val(Math.floor(values[handle]));
                    if (handle == 1)
                        $('#msi_member_search_age_end').val(Math.floor(values[handle]));
                });
            }
            demo8();
        });
    </script>
{% endblock %}